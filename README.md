# Быки и коровы (bulls & cows)

## О проекте

Быки и коровы &mdash; логическая комбинаторная игра для двух игроков. Данный проект является программной реализацией игры для настольного компьютера. Проект выполнен на языке Java с пользовательским интерфейсом на JavaFX.

## Правила игры

  * Играют вдвоем.
  * Перед началом игры каждый игрок загадывает четырехзначное число, цифры в котором не повторяются.
  * Цель игры &mdash; угадать (вычислить, выяснить, определить) загаданное соперником, опередив его.
  * Право первого хода определяется жребием, в дальнейших играх право первого хода передается по очереди.
  * В свой ход игрок сообщает противнику набор из четырех неповторяющихся цифр &mdash; предположение о загаданных цифрах противника. В ответ другой игрок должен назвать количество загаданных им цифр, которые есть в предположенных и стоят в тех же позициях, обозначив их "быками", и количество загаданных им цифр, которые есть в предположенных, но стоят в других местах, обозначив их "коровами".<br>Например: Загадано: 4729. Ход: 1792. Ответ: 1 бык (это 7) и 2 коровы (2 и 9).
  * Ходы делаются игроками строго по очереди.
  * Игрок, первым угадавший загаданное противником и опережающий противника более, чем на 1 ход, считается победителем.
  * Если игрок с правом первого хода угадывает загаданное противником число (получает в ответе 4 быка), у противника есть еще один ход, чтобы общее количество ходов игроков было одинаковым. Если второй игрок также угадывает загаданное число, &mdash; фиксируется ничья.
  * Если в процессе игры при анализе записанных ходов одним из игроков обнаружится, что его противник ошибся в подсчете быков и коров в одном или более ходов (если, как ни крути, не существует четверки цифр, соответствующих быкам и коровам всех предыдущих попыток), следует перепроверить количество быков и коров в предыдущих ходах. При подтверждении ошибки игра заканчивается, ошибшийся считается проигравшим. Право первого хода передается (как при нормальном завершении игры).
  * Если в процессе игры игрок сам обнаружит, что ошибся в подсчете быков и коров в предыдущих ходах, игра прекращается, результат не засчитывается, право первого хода не передается.
  * Если ошибка в подсчете быков и коров обнаружится сразу после завершения игры, результаты данной игры не засчитываются, право первого хода не передается.
  * После победы одного из игроков по предварительной договоренности победитель либо сообщает загаданное число для проверки правильности сообщаемых в процессе игры быков и коров, либо дает противнику возможность угадать загаданное число. В последнем случае проигравший делает свои ходы один (в учебно-тренировочных целях).

## Краткое описание программы

### Основная цель создания программы &mdash; учебно-тренировочная:

  * Разработка алгоритма отгадки в игре.
  * Реализация алгоритма на языке программирования высокого уровня.
  * Разработка программы на языке Java с решением задач, возникающих в процессе разработки.
  * Реализация интерфейса на JavaFX с решением задач, возникающих в процессе разработки.

Дополнительная цель &mdash; получение компьютерной логической игры.

### Достигнутые цели:

  * Разработан алгоритм отгадки;
  * Создана векторная блок-схема алгоритма с использованием SVG;
  * На языке Java разработан класс, реализующий алгоритм отгадки (модель);
  * Разработан вспомогательный класс, курирующий игру. Основные задачи класса &mdash; хранение загаданных чисел, подсчет и сообщение числа быков и коров в попытке;
  * На языке FXML разработан оконный пользовательский интерфейс игры (представление);
  * При помощи каскадных таблиц стилей CSS выполнено управление стилями отображения пользовательского интерфейса;
  * С использованием JavaFX реализована обработка действий пользователя (контроллер);
  * Использованы возможности JavaFX по добавлению визуальных эффектов (тень, отражение);
  * В тесте алгоритма использован класс AnimationTimer (JavaFX) для отображения каждого шага длительного процесса;
  * Использован несложный вариант хранения данных программы (положение окна, статистика игр, некоторые настройки) в файле .properties;
  * Сделано дочернее модальное окно для управления настройками;
  * На базе классов WebView и WebEngine сделано окно HTML-справки;
  * Разработана справка, фактически представляющая собой локальное одностраничное веб-приложение;
  * При разработке справки использованы возможности AngularJS.

В программе использованы распространявшиеся по лицензии Creative Commons Attribution 3.0 иконки из проекта <a class="urllink" href="http://www.fatcow.com/free-icons">fatcow</a>, к сожалению, ныне закрытого.

## Начало работы

### Зависимости

Работа начиналась с использованием JDK 8 с последующей миграцией на OpenJDK 11.0.2 и OpenJFX 11.0.2 (требуются модули `javafx.fxml`, `javafx.controls`, `javafx.graphics`, `javafx.web`).

В качестве IDE сначала использовался Eclipse, далее проект был перенесен в  Intelij IDEA (community edition).

### Получение проекта

Для получения копии репозитория следует воспользоваться кнопкой "Clone or download" на [странице репозитория](https://github.com/RomeoGolf/bulls-cows).

При отсутствии git можно нажать кнопку "Download ZIP" и получить последнюю версию рабочего дерева каталогов без истории коммитов.

При наличии git можно скопировать URL `https://github.com/RomeoGolf/bulls-cows.git` и использовать его в команде

~~~~
git clone https://github.com/RomeoGolf/bulls-cows.git
~~~~

в командной строке (git bash, например, в зависимости от ОС и настроек).

### Получение исполняемой версии

В разделе [releases](https://github.com/RomeoGolf/bulls-cows/releases) можно скачать архив с исполняемой версией программы. Версия содержит образ среды исполнения и не требует наличия установленной JRE.

### Компиляция и запуск

Для подготовки проекта к компиляции и запуску следует выполнеть слеюующие действия:

1. Запустить Intelij IDEA community edition. Если в среде открыт какой-либо проект &mdash; закрыть его (File -> Close project).
2. В окне "Welcome to Intelij IDEA" выбрать пункт "Open".
3. В окне "Open File or Project" выбрать папку с репозиторием или рабочим деревом. Проект откроется в IDE.
4. Выбрать пункт меню "File -> Project Structure...".
5. На вкладке "Project" ввести имя проекта (можно оставить то, что там уже есть), выбрать "Project SDK" (11) и "Project language level" (11). В последнем поле "Project compiler output" выбрать папку проекта, создать в ней подпапку "out".
6. На вкладке "Modules" удалить модуль, одноименный с проектом. Добавить новый модуль: нажать "+" -> "Import module", в окне "Select File or Directory to Import" выбрать папку с проектом, в ней &mdash; папку модуля `romeogolf.bullscows`, далее "Create module from existing sources" и далее нажимать кнопку "Next".
7. На вкладке "Libraries" нажать "+" -> "Java", далее в окне "Select Library Files" найти папку с `javafx-sdk-11.0.2`, в ней &mdash; папку "lib". Выбрать все JAR-файлы, оставив невыделенным файл src.zip. Нажать "OK".
8. Меню "Build" -> "Build Project". После сообщения в строек состояния "Build completed successfully in 3 s 838 ms" в папке проекта появится папка "out" с результатами компиляции.
9. В папку "out/production/romeogolf.bullscows/" нужно скопировать папку "res/" из корня проекта.
10. В дереве проекта найти класс `Main` (его значок содержит зеленый треугольник, символ запуска) и в контекстном меню выбрать "Run 'Maim.main()'". Приложение запустится.
11. Опционально: можно выбрать пункт меню "File" -> "Project Structure..." и на вкладке "Artifacts" нажать "+" -> "JAR" -> "From modules with dependencies", в окне "Create JAR from Modules" выбрать Main Class, радиокнопку "copy to the output directory and link via manifest", а "Directory for  META-INF/MANIFEST.MF" выберется сама. Только надо предварительно стереть этот самый `MANIFEST.MF` по указанному пути. Это позволит создать JAR-файл в папке `out\artifacts\romeogolf_bullscows_jar\` средствами IDE: "Build -> Build Artifacts..."

В папке проекта имеются файлы командного интерпретатора Windows для экспериментов с утилитами JDK:

* Файл `make-jar.cmd` создает jar-файл в папке "out-jar", которая перед запуском командного файла должна существовать.
* Файл `make-jmod.cmd` создает из jar-файла, созданного средствами IDR, jmod-файл в папке "out-jmod", которая перед запуском командного файла должна существовать.
* Файл `make-jre.cmd` создает в папке "outputDir" образ JRE с откомпилированным модулем из файлов классов проекта. Папка "outputDir" не должна существовать.
* Файл `make-jre-from-jar.cmd` создает в папке "outputDir-jar" образ JRE с откомпилированным модулем из jre-файла, созданного командным файлом `make-jar.cmd`.
* Файл `make-jre-from-ide-jar.cmd` создает в папке "outputDir-jar" образ JRE с откомпилированным модулем из jre-файла, созданного средствами IDE.
* Файл `make-jre-from-jmod.cmd` создает в папке "outputDir-jmod" образ JRE с откомпилированным модулем из jmod-файла, созданного командным файлом `make-jmod.cmd`.

### Запуск исполняемой версии проекта

В папке, скачанной по ссылке  [releases](https://github.com/RomeoGolf/bulls-cows/releases) или в любой из `outputDir*` следует в папке "bin\" найти и запустить на выполнение командный файл `launcher` (для Linux) или `launcher.bat` (для Windows).

## Развитие проекта

Дальнейшее развитие проекта не предполагается, так как основная цель достигнута. Однако, некоторые доработки и модификации не исключаются.

## Лицензия

Данный проект является учебно-ознакомительным и не предназначен для распространения.

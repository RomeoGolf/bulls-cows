
<h1>Об алгоритме решения:</h1>

<p>Первую цифру можно выбрать из 10 вариантов. Вторую &mdash; уже из 9, так как одна занята. Третью, соответственно, из 8, и четвертую &mdash; из 7. Таким образом, вариантов чисел, которые можно загадать 10 * 9 * 8 * 7 = 5040. Это максимальное количество ходов, если играть достаточно тупо, чтобы просто перебирать варианты, но достаточно умно, чтобы не повторяться, и при этом сильно не везет.</p>
<p>Существует несколько стратегий решения. Самый оптимальный алгоритм угадает любую последовательность максимум за 7 ходов. Однако, даже для самого оптимального алгоритма существует минимум одна последовательность, для отгадки которой потребуется не менее 7 ходов. Эти данные были получены группой студентов кафедры кибернетики МИСиС под руководством доцента М. Гендлера.</p>
<p>Именно на семь ходов следует ориентироваться человеку при отгадке. При определенном навыке можно укладываться них без особого труда.</p>
<p>Для виртуального игрока в данной программе реализован не самый оптимальный алгоритм, угадывающий в худшем случае за 14 ходов, а в среднем &mdash; за 6,78. Тем не менее, и он не дает расслабиться, угадывая порой за 3-4 хода.</p>

<h2 id="block_diagram_main">Блок-схема алгоритма</h2>
<p>В алгоритме используются следующие данные (с их условными названиями и сокращениями):</p>
<ul>
  <li>Убавляемый по мере надобности набор цифр для отгадки Digits For Answer (DFA)</li>
  <li>Массив [0..3] очередной попытки (квод) Next Shot (NS)</li>
  <li>Массив [0..3] индексов цифр попытки в наборе Shot Digit In Digits Index (ShDIDi)</li>
  <li>Цифры попытки Shot Digits (ShD) для расстановки по местам (поиска быков)</li>
  <li>Индексы цифр попытки Indices (I) для расстановки по местам (поиска быков)</li>
  <li>Индекс текущей обрабатываемой цифры в кводе Shot Digit Index (SDI)</li>
  <li>Индекс текущей обрабатываемой цифры в наборе Digits For Answer Index (DFAI)</li>
  <li>Наращиваемый массив данных по попыткам — &lt;квод, б, к&gt; Shots Data</li>
  <li>Число быков Б, число коров К текущей попытки.</li>
</ul>

<h3>Блок-схема основного алгоритма отгадки</h3>
<p>На диаграмме ниже приведен основной алгоритм отгадки, обобщенный и включающий в себя предопределенные процессы, описываемые отдельными блок-схемами. Блок-схема выполнена без полного соблюдения требований ГОСТ 19.701-90 &laquo;ЕСПД. Схемы алгоритмов, программ, данных и систем. Условные обозначения и правила выполнения&raquo;, так как такой цели не ставилось.</p>
<div id="a1"><object data="./res/a1.svg" type="image/svg+xml" height="600px" width="600px"></object></div>

<h3 id="block_diagram_shot">Блок-схема алгоритма очередной попытки</h3>
<p>Наиболее интересная часть, сердце и мозг алгоритма. Содержит предопределенные процессы, развернутые в блок-схемах далее на странице. Данная часть описывает действия, которые нужно совершить для получения четверки цифр, не противоречащих предыдущим попыткам. В процессе отгадки возможно постепенное сокращение набора, из которого можно брать цифры для отгадки, так как будет выясняться, что некоторые цифры однозначно недопустимы.</p>
<div id="a2"><object data="./res/a2.svg" type="image/svg+xml" height="950px"></object></div>

<h3 id="block_diagram_aids">Блок-схемы вспомогательных алгоритмов</h3>
<h4>Блок-схема проверки на допустимость подмассива</h4>
<p>Эта часть проверяет, не противоречат ли подобранные на текущем этапе цифры информации, полученной за предыдущие попытки.</p>
<p>Например, если в одной из попыток было &laquo;[5317 0Б 1К]&raquo;, то предлагать 1370 как-то неразумно. Минимум две цифры будут ошибочны, даже не глядя пока на соответствие их своим местам. Если предположить, что 1 &mdash; верная, то 3 и 7 надо чем-то заменить.</p>
<div id="a3"><object data="./res/a3.svg" type="image/svg+xml"  height="600px"></object></div>

<h4>Блок-схема попытки расстановки быков</h4>
<p>В этой части предполагается, что полученные цифры допустимы для отгадки, так как соответствуют данным из предыдущих попыток. Теперь их надо расставить. Здесь проверяется совпадение цифр попытки с цифрами предыдущих попыток, одновременно анализируется количество быков в проверяемых попытках.</p>
<p>Если предположение о допустимости цифр неверно, и некоторые цифры на самом деле не подходят, попытка расстановки может оказаться неудачной. В этом случае будет выдаваться нерасставленный набор цифр для получения дополнительной информации.</p>
<p>Было бы неплохо при получении ошибки при расстановке сразу проанализировать данные и вычислить быка, вызывающего сбой. Однако это усложнение алгоритма не реализовано. Здесь, видимо, слабое место, которое можно в будущем усилить. Не исключено, что при введении действий, устранающих ошибку на месте, алгоритм приблизится к семиходовому идеалу.</p>
<div id="a4"><object data="./res/a4.svg" type="image/svg+xml" height="900px"></object></div>

<h4>Блок-схема проверки допустимости индекса (с коррекцией)</h4>
<p>Этот процесс используется для расстановки цифр по местам. Для расстановки используется массив индексов той же размерности, что и массив цифр отгадки &mdash; четыре элемента. Каждый элемент массива индексов содержит индекс соответствующего элемента в массиве цифр таким образом, чтобы эта цифра на позиции с этим индексом оказалась на своем месте, то есть, стала быком. Таким образом, каждый индекс может принимать значения от 0 до 3 и должен быть уникальным в пределах массива индексов.</p>
<p>Собственно, за этим и следит описываемый ниже процесс. Если при подборе индекса окажется, что такой индекс уже есть в массиве, подбираемый индекс увеличивается. Если в результате индекс станет больше четырех &mdash; что-то не так с предыдущими индексами.</p>
<div id="a5"><object data="./res/a5.svg" type="image/svg+xml"  height="400px"></object></div>

<h4>Блок-схема проверки допустимости подмассива индексов по быкам</h4>
<p>Этот участок отвечает за проверку допустимости цифр массива на местах, указанных в массиве индексов по результатам предыдущих попыток. Действия примерно такие же, как и при проверке на допустимость подмассива цифр, но анализируется не сумма быков и коров попытки, а только число быков.</p>
<div id="a6"><object data="./res/a6.svg" type="image/svg+xml"  height="400px" width="600px"></object></div>


